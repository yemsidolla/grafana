# Grafana Notification Templates
# Custom email templates for alert notifications

apiVersion: 1

templates:
  - name: "email_template"
    template: |
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="utf-8">
        <title>Grafana Alert</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background-color: #f5f5f5; }
          .container { max-width: 600px; margin: 0 auto; background-color: white; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
          .header { background-color: #1f78d1; color: white; padding: 20px; border-radius: 8px 8px 0 0; }
          .content { padding: 20px; }
          .alert { margin-bottom: 20px; padding: 15px; border-left: 4px solid #e74c3c; background-color: #fdf2f2; }
          .alert.warning { border-left-color: #f39c12; background-color: #fef9e7; }
          .alert.info { border-left-color: #3498db; background-color: #ebf3fd; }
          .alert.critical { border-left-color: #e74c3c; background-color: #fdf2f2; }
          .severity { display: inline-block; padding: 4px 8px; border-radius: 4px; font-size: 12px; font-weight: bold; text-transform: uppercase; }
          .severity.critical { background-color: #e74c3c; color: white; }
          .severity.warning { background-color: #f39c12; color: white; }
          .severity.info { background-color: #3498db; color: white; }
          .footer { background-color: #f8f9fa; padding: 15px; border-radius: 0 0 8px 8px; font-size: 12px; color: #6c757d; }
          .metric { background-color: #f8f9fa; padding: 10px; border-radius: 4px; margin: 10px 0; font-family: monospace; }
        </style>
      </head>
      <body>
        <div class="container">
          <div class="header">
            <h1>ðŸš¨ Grafana Alert Notification</h1>
            <p>Monitoring System Alert - {{ .GroupLabels.alertname }}</p>
          </div>
          
          <div class="content">
            {{ range .Alerts }}
            <div class="alert {{ .Labels.severity }}">
              <h3>{{ .Annotations.summary }}</h3>
              <p><strong>Description:</strong> {{ .Annotations.description }}</p>
              
              <div style="margin: 15px 0;">
                <span class="severity {{ .Labels.severity }}">{{ .Labels.severity }}</span>
                <strong>Instance:</strong> {{ .Labels.instance }}<br>
                <strong>Service:</strong> {{ .Labels.service }}<br>
                <strong>Time:</strong> {{ .StartsAt.Format "2006-01-02 15:04:05 UTC" }}<br>
                {{ if .Annotations.runbook_url }}
                <strong>Runbook:</strong> <a href="{{ .Annotations.runbook_url }}">View Runbook</a><br>
                {{ end }}
              </div>
              
              {{ if .Values }}
              <div class="metric">
                <strong>Current Values:</strong><br>
                {{ range $key, $value := .Values }}
                {{ $key }}: {{ $value }}<br>
                {{ end }}
              </div>
              {{ end }}
            </div>
            {{ end }}
            
            <div style="margin-top: 30px; padding: 15px; background-color: #e8f4fd; border-radius: 4px;">
              <h4>ðŸ“Š Quick Actions:</h4>
              <ul>
                <li><a href="http://localhost:3000">Open Grafana Dashboard</a></li>
                <li><a href="http://localhost:3000/alerting">View All Alerts</a></li>
                <li><a href="http://localhost:3000/explore">Explore Logs</a></li>
              </ul>
            </div>
          </div>
          
          <div class="footer">
            <p>This alert was generated by Grafana Monitoring System</p>
            <p>Alert Group: {{ .GroupLabels.alertname }} | Status: {{ .Status }}</p>
            <p>Generated at: {{ .Receiver }} | {{ now }}</p>
          </div>
        </div>
      </body>
      </html>
